<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RedCrystal Studios | Admin Panel</title>

<style>
:root {
  --bg:#0b0810;
  --glass: rgba(255,255,255,0.06);
  --accent:#ff2d55;
  --accent-2:#7c5cff;
  --muted:#a7a0b2;
  --glass-border: rgba(255,255,255,0.04);
}
*{box-sizing:border-box;}
body{
  margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
  background:var(--bg);color:#fff;
  -webkit-font-smoothing:antialiased;
  animation:fadeIn .8s ease;
}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
a{color:inherit;text-decoration:none;}
.sky{position:fixed;inset:0;z-index:-3;overflow:hidden;
  background:radial-gradient(ellipse at 10% 10%,rgba(255,45,85,0.06),transparent 6%),
             radial-gradient(ellipse at 90% 80%,rgba(124,92,255,0.04),transparent 10%),
             linear-gradient(180deg,rgba(8,6,14,1)0%,rgba(6,4,10,1)100%);
}
.stars{position:absolute;inset:0;
  background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><g fill="white" opacity="0.03"><circle cx="20" cy="50" r="1"/><circle cx="120" cy="70" r="1"/><circle cx="300" cy="30" r="1"/><circle cx="70" cy="320" r="1"/><circle cx="10" cy="200" r="1"/></g></svg>') repeat;
  mix-blend-mode:screen;
}
.glow-orb{position:absolute;width:600px;height:600px;left:10%;top:-10%;
  background:radial-gradient(circle at 30% 30%,rgba(255,45,85,0.12),transparent 20%),
             radial-gradient(circle at 70% 70%,rgba(124,92,255,0.08),transparent 30%);
  filter:blur(40px);z-index:-2;transform:rotate(10deg);
}
header{display:flex;align-items:center;justify-content:space-between;padding:20px 32px;}
.brand{display:flex;gap:14px;align-items:center;}
.brand h1{font-size:18px;margin:0;}
.brand p{margin:0;font-size:12px;color:var(--muted);}
nav{display:flex;gap:14px;align-items:center;}
.btn{padding:10px 16px;border-radius:10px;background:transparent;border:1px solid var(--glass-border);
  cursor:pointer;font-weight:600;
}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));
  box-shadow:0 8px 30px rgba(124,92,255,0.14);color:white;border:0;
}
.main{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:80px 20px;min-height:60vh;}
.panel{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:16px;
  box-shadow:0 0 20px rgba(255,0,50,0.3);padding:40px 50px;max-width:900px;
}
.panel h2{color:#ff0032;margin-bottom:10px;}
.panel p{color:#ccc;margin-bottom:30px;}
.user-item,.chat-item{
  background:rgba(255,255,255,0.03);
  padding:10px 12px;
  border-radius:8px;
  margin:6px 0;
  text-align:left;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.user-item strong,.chat-item strong{color:#fff;}
.chat-item small{color:var(--muted);}
.delete-btn{
  background:none;
  border:1px solid rgba(255,0,50,0.4);
  color:#ff0032;
  border-radius:6px;
  padding:4px 8px;
  cursor:pointer;
  font-size:12px;
  transition:all .2s;
}
.delete-btn:hover{
  background:rgba(255,0,50,0.15);
}
footer{padding:22px 8vw;color:var(--muted);font-size:14px;display:flex;flex-direction:column;gap:6px;
  justify-content:center;align-items:center;border-top:1px solid var(--glass-border);
}
</style>
</head>

<body>
<div class="sky"><div class="stars"></div><div class="glow-orb"></div></div>

<header>
  <div class="brand">
    <img src="img/RCS LOG.png" alt="RedCrystal Studios Logo" width="160">
    <div>
      <h1>RedCrystal_Studios</h1>
      <p>Admin Control Panel</p>
    </div>
  </div>
  <nav>
    <a class="btn" href="index.html">Home</a>
    <a class="btn" href="user.html">User Panel</a>
  </nav>
</header>

<section class="main">
  <div class="panel">
    <h2>ðŸ‘¥ Registered Users</h2>
    <div id="userList"><em>Loading users...</em></div>

    <hr style="margin:30px 0;border:0;border-top:1px solid rgba(255,255,255,0.1);">

    <h2>ðŸ’¬ Live Chat Messages</h2>
    <div id="chatList"><em>Loading messages...</em></div>
  </div>
</section>

<footer>
  <p>Â© 2025 RedCrystal_Studios â€” All rights reserved.</p>
</footer>

<!-- âœ… Firebase + logic -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
import { getDatabase, ref, onValue, remove } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

// ðŸ”¥ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCK6PEV_f87dGuU8k04rSmL7wRVxzIynkQ",
  authDomain: "alvion-chronicles.firebaseapp.com",
  projectId: "alvion-chronicles",
  storageBucket: "alvion-chronicles.firebasestorage.app",
  messagingSenderId: "943295347187",
  appId: "1:943295347187:web:6e09f5a56576326df07a86",
  measurementId: "G-E092NF3R9V"
};

// âœ… Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth(app);
const db = getDatabase(app);

// ðŸ‘¥ Load Users
const userList = document.getElementById("userList");
const usersRef = ref(db, "users");

onValue(usersRef, (snapshot) => {
  const data = snapshot.val();
  if (!data) {
    userList.innerHTML = "<p style='color:#999;'>No users found.</p>";
    return;
  }
  userList.innerHTML = Object.entries(data)
    .map(([key, user]) => `
      <div class="user-item">
        <div>
          <strong>${user.displayName || "Unnamed User"}</strong><br>
          <small>${user.email || "No email"}</small>
        </div>
      </div>
    `)
    .join("");
});

// ðŸ’¬ Live Chat Messages
const chatList = document.getElementById("chatList");
const chatRef = ref(db, "messages");

onValue(chatRef, (snapshot) => {
  const data = snapshot.val();
  if (!data) {
    chatList.innerHTML = "<p style='color:#999;'>No messages yet.</p>";
    return;
  }
  chatList.innerHTML = Object.entries(data)
    .map(([id, msg]) => `
      <div class="chat-item">
        <div>
          <strong>${msg.displayName || "User"}</strong><br>
          <small>${msg.text || ""}</small>
        </div>
        <button class="delete-btn" data-id="${id}">Delete</button>
      </div>
    `)
    .join("");

  // Attach delete listeners
  document.querySelectorAll(".delete-btn").forEach(btn=>{
    btn.addEventListener("click", async ()=>{
      const id = btn.dataset.id;
      await remove(ref(db, "messages/" + id));
    });
  });
});
</script>

</body>
</html>
